<div th:fragment="header">
    <!-- Font Awesome CSS -->
    <link href="/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/css/sb-admin-2.min.css" rel="stylesheet">
    <link href="/css/custom.css" rel="stylesheet">

    <!-- jQuery and Bootstrap scripts -->
    <script src="/vendor/jquery/jquery.min.js"></script>
    <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages -->
    <script src="/js/sb-admin-2.min.js"></script>
    <script src="/js/auth.js"></script>

    <!-- Sidebar adjustment for web/mobile -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let sidebar = document.getElementById("accordionSidebar");
            let sidebarToggle = document.getElementById("sidebarToggleTop");
            let currentPath = window.location.pathname;

            // 사이드바 초기화
            function resetSidebar() {
                let navItems = sidebar.querySelectorAll('.nav-item');
                navItems.forEach(item => {
                    item.classList.remove('active');
                    let collapseMenu = item.querySelector('.collapse');
                    if (collapseMenu) {
                        collapseMenu.classList.remove('show');
                    }
                });
            }

            // 초기 페이지 로드 시 사이드바 초기화
            resetSidebar();

            // 사이드바 토글 버튼 클릭 이벤트
            if (sidebarToggle) {
                sidebarToggle.addEventListener("click", function() {
                    sidebar.classList.toggle("toggled");
                    resetSidebar(); // 사이드바가 열릴 때 메뉴 비활성화
                });
            }
        });
    </script>

    <!-- jQuery 코드 추가 -->
	<script>
	    $(document).ready(function() {
	        // 현재 페이지의 메뉴 활성화 함수
	        function activateCurrentMenu() {
	            const currentUrl = window.location.pathname;
	
	            // 모든 메뉴 초기화
	            $('.nav-item').removeClass('active'); // 상위 메뉴 비활성화
	            $('.collapse-item').removeClass('active'); // 하위 메뉴 비활성화
	            $('.collapse').removeClass('show'); // 모든 하위 메뉴 닫기
	
	            // 현재 URL과 일치하는 메뉴 찾기
	            $('.collapse-item').each(function() {
	                if ($(this).attr('href') === currentUrl) {
	                    $(this).addClass('active'); // 현재 페이지의 하위 메뉴 활성화
	                    $(this).closest('.collapse').addClass('show'); // 하위 메뉴 열기
	                    $(this).closest('.nav-item').addClass('active'); // 상위 메뉴 활성화
	                }
	            });
	
	            // 디버깅: 메뉴 상태 확인
	            //console.log("🔍 [디버깅] 현재 활성화된 collapse 메뉴:", $(".collapse.show"));
	        }
	
	        // 모바일에서 사이드바 토글 버튼 클릭 시 실행
	        function toggleSidebarMenu() {
	            if ($(window).width() <= 768) { // 모바일 모드일 때만 실행
	                $('.collapse').removeClass('show'); // 모든 하위 메뉴 닫기
	            }
	        }
	
	        // 페이지 로드 시 실행 (새로고침 후에도 반영)
	        activateCurrentMenu();
	
	        // 모바일에서 사이드바 토글 버튼 클릭 시
	        $('#sidebarToggleTop').click(function() {
	            $('#sidebar').toggle(); // 사이드바 표시/숨기기
	            toggleSidebarMenu(); // 모바일 모드에서는 하위 메뉴 자동 닫기
	        });
	
	        // 디버깅: collapse가 show 클래스를 가졌는지 확인
	        //console.log("🔍 [디버깅] collapse가 show 클래스를 가졌는지 확인:", $(".collapse").hasClass("show"));
	        //console.log("🔍 [디버깅] collapse 클래스 적용된 요소:", $(".collapse"));
	        //console.log("🔍 [디버깅] show 클래스를 가진 collapse 메뉴:", $(".collapse.show"));
	
	        // 모바일에서 페이지 로드 시 모든 collapse 메뉴 닫기
	        if ($(window).width() <= 768) {
	            //console.log("🔍 [디버깅] 모바일 모드 - 모든 collapse 메뉴 닫기");
	            $('.collapse').removeClass('show');
	        }
	    });
	</script>
</div>
